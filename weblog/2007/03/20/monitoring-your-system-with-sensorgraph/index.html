
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Monitoring your system with SensorGraph - My Delusional Dream</title>
  <meta name="author" content="Patrick Wagstrom">

  
  <meta name="description" content="Monitoring Your System With SensorGraph Mar 20th, 2007 | var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://patrick.wagstrom.net/weblog/2007/03/20/monitoring-your-system-with-sensorgraph">
  <link href="/weblog/favicon.png" rel="icon">
  <link href="/weblog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/weblog/javascripts/modernizr-2.0.js"></script>
  <script src="/weblog/javascripts/ender.js"></script>
  <script src="/weblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/weblog/atom.xml" rel="alternate" title="My Delusional Dream" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/weblog/">My Delusional Dream</a></h1>
  
    <h2>Thoughts of a cautious technocrat</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/weblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:patrick.wagstrom.net/weblog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/weblog/">Blog</a></li>
  <li><a href="/weblog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Monitoring Your System With SensorGraph</h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-20T10:59:00-04:00" pubdate data-updated="true">Mar 20<span>th</span>, 2007</time>
        
        
         | 

<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>


        
      </p>
    
  </header>


<div class="entry-content"><p>One important aspect of keeping a computer healthy and happy is monitoring its vital stats.  This is especially true of systems that are on 24/7 or that don&#8217;t have a traiditional mode of user interaction.  In my case, my MythTV box fits both of these qualities.  In particular, it&#8217;s important to make sure that the fans are running and none of the drives or processors in the machine are running abnormally hot, as this could indicate a malfunction within the machine and should be looked at.</p>

<p>Linux provides a multitude of methods to get at various sensor information on your computer, the most common method is with the lm-sensors package. This suite of tools interacts with various sensors that are built into most every piece of x86 compatible hardware.  Typically you&#8217;ll just use the command sensors to get a status list, such this listing from my MythTV box:</p>

<pre><code>w83627thf-isa-0290
Adapter: ISA adapter
VCore:     +1.09 V  (min =  +1.94 V, max =  +1.94 V)       ALARM
+12V:     +12.40 V  (min = +10.82 V, max = +13.19 V)
+3.3V:     +3.14 V  (min =  +3.14 V, max =  +3.47 V)
+5V:       +4.93 V  (min =  +4.75 V, max =  +5.25 V)
-12V:     -12.11 V  (min = -10.80 V, max = -13.18 V)       ALARM
V5SB:      +4.97 V  (min =  +4.76 V, max =  +5.24 V)
VBat:      +2.94 V  (min =  +2.40 V, max =  +3.60 V)
fan1:        0 RPM  (min = 5075 RPM, div = 2)              ALARM
CPU Fan:  2812 RPM  (min = 2636 RPM, div = 8 )
fan3:     5037 RPM  (min = 61363 RPM, div = 2)              ALARM
M/B Temp:    +37°C  (high =  +111°C, hyst =   +72°C)   sensor = thermistor
CPU Temp:  +25.5°C  (high =   +80°C, hyst =   +75°C)   sensor = thermistor
temp3:     +10.5°C  (high =   +80°C, hyst =   +75°C)   sensor = diode
vid:      +0.275 V  (VRM Version 9.0)
alarms:
beep_enable:
          Sound alarm enabled
</code></pre>

<p>The top little confusing string just indicates what sensors interface the program is using.  Beneath that is a listing of sensors and their current values, you&#8217;ll notice that there are measurements for all of the voltages from your power supply, fan speeds, and motherboard and cpu temperatures.  It may take a little looking to figure out what all of these mean and why some of them may not have have values that intially make sense.  For example, I only have two fans on my system, the CPU fan and northbridge, which is why it says 0 RPM for the value of fan1.  I&#8217;ve also noticed that the voltage tends to get confused by powernow setups, especially when you&#8217;ve gone through and <a href="http://patrick.wagstrom.net/weblog/linux/custom-powersaving-kernel-for-profit.xml">modified your DSDT table to save some extra power</a>.  Ensuring that these values are nominally appropriate is a key element for computer health as if the voltages sway too much they can cause interference with the PCI bus, as was my problem with pcHDTV cards and the original Antec power supply in my Antec Overture II case.</p>

<p>While the lm-sensors package monitors lots of things, there are many other sensors in your system that don&#8217;t have such a uniform interface.  For example, you the nvclock application can provide a wealth of knowledge surrounding <a href="http://www.nvidia.com/">nvidia</a> video cards.  Here&#8217;s a snippet of what you can expect from running nvclock -i:</p>

<pre><code>-- General info --
Card:           nVidia Geforce 6600LE
Architecture:   NV43 A4
PCI id:         0x142
GPU clock:      9.705 MHz
Bustype:        PCI-Express

-- Pipeline info --
Pixel units: 4 (10b)
Vertex units: 3 (111b)
HW masked units: pixel 01b vertex 000b
SW masked units: None

-- Memory info --
Amount:         256 MB
Type:           128 bit DDR
Clock:          12.846 MHz

-- Sensor info --
Sensor: GPU Internal Sensor
GPU temperature: 52C

-- VideoBios information --
Version: 05.43.02.69.02
Signon message: GeForce 6600 LE BIOS
Performance level 0: 300MHz / 400MHz
</code></pre>

<p>Not only does it correctly identify the exact video card you&#8217;re using, but it also provides information about the performance levels and clock rates the card is running at.  Here we see that when my monitor is off, as it was when I ran this, the card slows itself down to conserve extra power.  We also see that the interal GPU temperature is 52C.  This is a little bit of a concern, but should be taken lightly as the card is a first generation fanless GeForce 6600 and has a fairly poor heat sink.  It frequently overheats in games like Quake 4.</p>

<p>Not to be left out, hard drives also have an amazing amount of information available at your finger tips.  Almost every IDE or SATA hard drive out there is compatible with SMART, which is an automated tested and analysis system for hard drives.  Up until last month, it was widely thought that temperature and usage loads were high correlated to drive failure, however thanks to some clever research out of <a href="http://www.cmu.edu/">Carnegie Mellon</a>, we&#8217;ve seen that for the most part <a href="http://www.usenix.org/events/fast07/tech/schroeder.html">failure rates grow with time</a> and have little to do with other parameters.  Folks from Google published a similar paper in which they looked at <a href="http://www.usenix.org/events/fast07/tech/pinheiro.html">drive failures across a large enterprise</a> and found consistent results.  Now it just means that we can make nifty graphs and re-evaluate if we need more fans in our systems.  Anyway, the <a href="http://smartmontools.sourceforge.net/">smartmontools</a> package is a great set of tools that monitors drive parameters and can automatically alert you if a drive is going bad.  Of course, I&#8217;ve had drives that smartmontools was complaining about for years that kept on working.</p>

<p>Now that you know how to collect all this information, wouldn&#8217;t it be nice if it were done automatically and stored in a database with a nice web interface?  Yes it would.  That&#8217;s where SensorGraph comes along.  SensorGraph is a python script that reads the values of all of the sensors and stores them into a database for further analysis.  I typically run the program once every fifteen minutes.  Then to look at my system, I created a web interface to SensorGraph that utilizes <a href="http://www.gnuplot.info/">GNUPlot</a> to create some SVG graphs for visualization of trends.  Throw in some nice javascript interface, and you&#8217;ve got yourself a nice little setup to look at your system.  If you&#8217;d like to get a copy of SensorGraph, you can check it out from my subversion at <a href="https://secure.wagstrom.net/svn/projects/sensorGraph">https://secure.wagstrom.net/svn/projects/sensorGraph</a>. If you&#8217;d like to see a demo of sensor graph&#8217;s web interface, I&#8217;ve put up a <a href="http://patrick.wagstrom.net/misc/test.cgi">small demo site</a> that uses some static information from my MythTV box.  I would have a live information setup for my web server, but it&#8217;s a virtual machine, so most of the sensor interfaces aren&#8217;t present or return garbage information.</p>

<p>Using all of these tools, I can quickly look at the health of my drives and CPU and tell if something is going wrong.  It also provides a nice reminder of what days were warmer because I can see days that the CPU was typically warmer, indicating that it was probably warmer outside.  Not entirely practical, but perhaps helpful.  In the future I&#8217;d like to add the ability to calculate some trend lines and a sliding window for the graphs to better get an idea of the health of the machine.</p>
</div>


<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>




  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Wagstrom</span></span>

      








  


<time datetime="2007-03-20T10:59:00-04:00" pubdate data-updated="true">Mar 20<span>th</span>, 2007</time>
      

<span class="categories">
  
    <a class='category' href='/weblog/blog/categories/code/'>code</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://patrick.wagstrom.net/weblog/2007/03/20/monitoring-your-system-with-sensorgraph/" data-via="pridkett" data-counturl="http://patrick.wagstrom.net/weblog/2007/03/20/monitoring-your-system-with-sensorgraph/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/weblog/2007/03/12/sanitization/" title="Previous Post: Sanitization and Focus of Weblogs">&laquo; Sanitization and Focus of Weblogs</a>
      
      
        <a class="basic-alignment right" href="/weblog/2007/04/27/internet-radio-equality-act/" title="Next Post: Support the Internet Radio Equality Act">Support the Internet Radio Equality Act &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weblog/2012/05/10/static-bloggin/">Static Bloggin</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/28/i-am-not-a-climatologist-and-neither-are-most-of-these-people/">I am not a climatologist, and neither are most of these people</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/10/looking-for-summer-interns-in-the-software-technology-group-at-ibm-tj-watson-research-center/">Looking for Summer Interns in the Software Technology Group at IBM TJ Watson Research Center</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/a-review-of-2011-personal-development-goals/">A Review of 2011 Personal Development Goals</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/open-source-and-technology-predictions-for-2012/">Open Source and Technology Predictions for 2012</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pridkett">@pridkett</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pridkett',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/weblog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pridkett", 4, false);
    });
  </script>
  <script src="/weblog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pridkett" class="twitter-follow-button" data-show-count="false">Follow @pridkett</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102672530623465237388?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Patrick Wagstrom -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
