
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>IPv6 Applications - My Delusional Dream</title>
  <meta name="author" content="Patrick Wagstrom">

  
  <meta name="description" content="IPv6 Applications May 22nd, 2003 | var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url; In &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://patrick.wagstrom.net/weblog/2003/05/22/ipv6applications">
  <link href="/weblog/favicon.png" rel="icon">
  <link href="/weblog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/weblog/javascripts/modernizr-2.0.js"></script>
  <script src="/weblog/javascripts/ender.js"></script>
  <script src="/weblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/weblog/atom.xml" rel="alternate" title="My Delusional Dream" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/weblog/">My Delusional Dream</a></h1>
  
    <h2>Thoughts of a cautious technocrat</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/weblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:patrick.wagstrom.net/weblog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/weblog/">Blog</a></li>
  <li><a href="/weblog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">IPv6 Applications</h1>
    
    
      <p class="meta">
        








  


<time datetime="2003-05-22T23:04:00-04:00" pubdate data-updated="true">May 22<span>nd</span>, 2003</time>
        
        
         | 

<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>


        
      </p>
    
  </header>


<div class="entry-content"><p>In <a href="http://patrick.wagstrom.net/weblog/archives/000125.html">yesterday&#8217;s article</a> I wrote about how to get <a href="http://www.openbsd.org/">OpenBSD</a> and IPv6 to play nicely together, so you could get some basic applications running.  Today, I&#8217;m going to go into some more depth and tell about how to get some applications going.</p>

<h4>Finding Hostnames</h4>

<p>One of the most basic things that you&#8217;ll want to do is look up hostnames on the Internet.  For IPv4 an address record is an A record, for IPv6 it is an AAAA record. Thus, to get the IPv6 address for a host run the command <strong>dig [hostname] AAAA</strong> to get the record.</p>

<h4>Web Browsing</h4>

<p>The first that you&#8217;ll probably want to get going is web browsing.  If for nothing else than allowing you see the wonderful <a href="http://www.kame.net/">dancing kame</a>.  The great thing is that for newer versions of <a href="http://www.mozilla.org/">Mozilla</a>, <a href="http://www.konqueror.org/">Konqueror</a>, and <a href="http://galeon.sf.net/">Galeon</a> you don&#8217;t need to do anything.  By default if a host also has an IPv6 address, it will try to access it over IPv6.  The problem comes when you try to enter IPv6 addresses into your address bar, usually they&#8217;ll get mangled.  To fix this, for an address you can put the address in brackets.  Thus, you should see that <a href="http://www.wagstrom.org/">http://www.wagstrom.org/</a> and <a href="http://%5B2001:470:1f00:572::1%5D/">http://[2001:470:1f00:572::1]/</a> will take you to the same location, which is my little IPv6 test web server.</p>

<h4>Web Servers</h4>

<p>I&#8217;ve read some stuff that <a href="http://httpd.apache.org/">Apache</a> apparently has IPv6 support built in natively as of version 2.  Unfortunately, the chroot version of it in OpenBSD is still based on version 1.3, so there is no IPv6 support, at least not that I could tell.  Because I&#8217;m lazy, I didn&#8217;t want to go and install a whole new version of Apache, after all, my current setup works fine and there is no reason to think people will currently get added benefit from accessing it under IPv6.</p>

<p>Looking for a simple solution I settled on <a href="http://www.acme.com/software/thttpd/">thttpd 2.23</a>.  This was pretty straight forward to compile, in fact no additional options were needed to get IPv6 support.  Then I wanted to start serving web pages from a special IPv6 directory under my normal html directory.  To do this, I added the following commands to <strong>/etc/rc.local</strong> to start up thttpd:</p>

<pre><code># thttpd startup
echo -n ' thttpd ipv6 webserver startup'
y=`pwd`
cd /home/patrick/public_html/ipv6
thttpd -p 80 -h 2001:470:1f00:572::1 -r
cd $y
</code></pre>

<p>This very simply echoes that it is starting up the web service.  Stores the current directory in a variable.  Changes into the director where the web pages are being served from, and then starts up an instance of thttpd.  The <strong>-p 80</strong> tells it to listen on port 80, while the <strong>-h 2001:470:1f00:572::1</strong> gives the IP address that the daemon should bind to.  A quick restart later (or just running the commands as root) and you should be able to access you brand spanking new IPv6 web server.</p>

<h4>SSH</h4>

<p>Probably one of the best reasons to use IPv6 is to avoid manual tunneling to get to a machine that resides behind a NAT device.  <a href="http://www.openssh.com/">OpenSSH</a> supports IPv6 natively.  Once you have IPv6 running, you&#8217;ll need to give the server a restart (so it will know to start listening on the IPv6) interfaces.  Then you can connect to it by referencing an IPv6 only hostname or IP address.  If the machine has entries for both IPv4 and IPv6 you can specify the -6 flag to force IPv6.  For instance:</p>

<pre><code>$ ssh -6 yourhost.ipv6.yourdomain.com
</code></pre>

<p>should connect to your designated host via IPv6.  You&#8217;ll get a good idea based on where the system says you&#8217;re coming from when you first log in.</p>

<h4>IRC</h4>

<p>Although most of the unix IRC clients claim to have support for IPv6, the only one I&#8217;ve been able to get to work successfully is <a href="http://www.bitchx.com/">BitchX</a>.  You&#8217;ll probably need to recompile it to enable IPv6 as the default compiled package for OpenBSD does not support IPv6.  You can do this by setting <strong>WITH_IPV6=yes</strong> if compiling from ports, or doing <strong>./configure &#8211;enable-ipv6</strong> if compiling from source.</p>

<p>After this point you&#8217;ll probably want to connect to an IPv6 irc server.  Two that I&#8217;ve had good luck with are irc.ipv6.homelien.no and irc.efnet.nl.  The problem, is that because both of these have IPv4 addresses you&#8217;ll need to manually give it the IP address of the server to connect to.  You then connect by doing the usual server command, but appending a comma to the hostname.  Thus <strong>/server 2001:840::1000,</strong> and <strong>/server 2001:7b8:3:3f:201:2ff:fef6:574e,</strong> will connect you to irc.ipv6.homelien.no and irc.efnet.nl respectively.  Once you have everything set up, you should see something like this when you do a whois:</p>

<pre><code>+----------------------------------------- --  -
| pridkett (patrick@dreams.ipv6.wagstrom.org) (Internic Non-Profit Organization)
| ircname  : patrick wagstrom
| channels : #openbsd
| server   : irc.ipv6.homelien.no (Who Cares -- IPv6!)
| away     : pridkett - is away: (Auto-Away after 10 mins) [BX-MsgLog On]
: idle     : 0 hours 22 mins 5 secs (signon: Thu May 22 16:25:40 2003)
</code></pre>

<p>However, you should be prepared to know that DCC will stop working unless that other person is using an IPv6 host.  So if you use IRC to talk, this is fine.  If you use IRC to download MP3s or warez, continue using IPv4.</p>

<h4>DNS</h4>

<p>Unfortunately, most DNS service providers do not support the AAAA record type, this includes <a href="http://www.dyndns.org/">dyndns.org</a> whom I use to administer wagstrom.net.  However, as I had wagstrom.org sitting around and not being used, I figured that I would get that set up.  The first thing that you need is a host with a static IPv4 address because nameservers still require IPv4 to work.  Then go and update your records to point your domain at your DNS, in my case this is at 66.1.1.250.</p>

<p>The version of BIND that ships with OpenBSD is IPv6 enabled, so once you get it going, you shouldn&#8217;t have any problems.  The first thing you need to do is edit <strong>/etc/rc.conf</strong> and change this line:</p>

<pre><code>named_flags=""          # for normal use: ""
</code></pre>

<p>This tells OpenBSD to start up the name server on the next boot.  Now you need to go to <strong>/var/named/etc</strong> and add your domain to your named.conf as you would an IPv4 domain.  In my case I did the following:</p>

<pre><code>zone "wagstrom.org" {
        type master;
        file "master/wagstrom.org";
        allow-transfer {
        };
};
</code></pre>

<p>You&#8217;ll want to change it for whatever your domain is.  The next step is to create the domain file.  This should reside in <strong>/var/named/master/wagstrom.org</strong>.  Here is what mine looks like:</p>

<pre><code>; File: wagstrom.org
; wagstrom.org network file
; support of IPv6 hostnames
;
@       IN      SOA     ns.wagstrom.org.        root.wagstrom.org.      (
        2003052101      ; serial number YYYYMMDDrr
        3H              ; refresh
        15M             ; retry
        1W              ; expiry
        1D )            ; minimum

        IN      NS      ns.wagstrom.org.
        IN      MX      10 scissors.wagstrom.net.
;
; Local Hosts
;
ns                      IN      AAAA    2001:470:1f00:572::1
                        IN      A       66.1.1.250
scissors.ipv6           IN      AAAA    2001:470:1f00:572::1
scissors.ipv4           IN      A       66.1.1.250
scissors                IN      CNAME   scissors.ipv4
www.ipv6                IN      CNAME   scissors.ipv6
</code></pre>

<p>Most of that  should be pretty straight forward.  I have different host names for my host for IPv4 (scissors.ipv4.wagstrom.org -> 66.1.1.250) and IPv6 (scissors.ipv6.wagstrom.org -> 2001:470:1f00:572::1).  In addition, I have ns.wagstrom.org mapping to both an IPv4 and an IPv6 address.  It&#8217;s important that this be in place and running for a while before trying to get reverse DNS to work.</p>

<h4>Reverse DNS</h4>

<p>One of the really nice features of <a href="http://tunnelbroker.net/">Tunnelbroker</a> is that it also allows you do your own reverse DNS.  Combined with the massive amounts of address space that IPv6 provides, this means a limitless number of virtual hosts with cool names like i.am.a.37337.hax0r.from.wagstrom.org for your use on IRC.  Or, more realistically, it makes it nicer for when you SSH to your other IPv6 boxes so you don&#8217;t have to guess what host it was from by the really long IP address.</p>

<p>To get all of this going you&#8217;ll want to log in to Tunnelbroker.  Then select your /64 allocation.  From your /64 allocation there is a spot to put the hostname of your name server.  I&#8217;m not sure, but I think it needs to resolve in both IPv4 and IPv6 address space.  If it doesn&#8217;t odds are that Tunnelbroker will come back and yell at you.  I can&#8217;t be sure because the docs are pretty sparse for it.</p>

<p>Anyway, so this assumes that Tunnelbroker has accepted your DNS.  Now comes the fun part, reverse DNS names for ipv6 are in the ipv6.arpa domain (older versions had them in the ipv6.int domain, you&#8217;ll probably want to use both for now as ipv6.arpa doesn&#8217;t work on <a href="http://www.freenet6.net/">freenet6</a> allocations).  The easiest way to do this is to use <a href="http://tools.fpsn.net/ipv6-inaddr/">the IPv6 reverse DNS zone builder</a>.  This handles the headache of converting your domain.  Follow their instructions and you should be good.</p>

<p>Otherwise, you can be a masochist and it by hand.  The first thing is to figure out what domains you&#8217;re going to be doing revese DNS for.  You do this by reversing the subnet (don&#8217;t forget to add your zeroes back in) and putting periods between them and finally smacking on a ip6.arpa at the end.  This 2001:470:1f00:572::/64 becomes 2.7.5.0.0.0.f.1.0.7.4.0.1.0.0.2.ip6.arpa.  That&#8217;s a mouthful.  Here&#8217;s the code that I put in my <strong>/var/named/etc/named.conf</strong> file:</p>

<pre><code>/* 2001:470:1f00:572::/64
 */
zone "2.7.5.0.0.0.f.1.0.7.4.0.1.0.0.2.ip6.arpa" {
        type master;
        file "master/ipv6.arpa";
        allow-transfer {
        };
};
</code></pre>

<p>That was fun. Now you get to do it for each of your hosts! Remember, those zeroes that disapper with the :: in the address, well ,they&#8217;re back.  So this is the contents of my <strong>/var/named/master/ipv6.arpa</strong> file:</p>

<pre><code>$TTL 3d ; Default TTL (bind 8 needs this, bind 9 ignores it)
@       IN SOA 2.7.5.0.0.0.f.1.0.7.4.0.1.0.0.2.ip6.arpa. wagspat.iit.edu. (
                2003052100        ; Serial number YYYYMMDDrr
                24h             ; Refresh time
                30m             ; Retry time
                2d              ; Expire time
                3d              ; Default TTL (bind 8 ignores this, bind 9 needs it)
)

; Name server entries
                                        IN     NS     scissors.wagstrom.org
; IPv6 PTR entries

; Subnet #1
$ORIGIN 2.7.5.0.0.0.f.1.0.7.4.0.1.0.0.2.ip6.arpa.

1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0         IN      PTR     scissors.ipv6.wagstrom.org.
</code></pre>

<p>If all goes well, in another few hours you should be able to log into IRC over IPv6 from your host and you&#8217;ll see your brand new IPv6 domain name coming up as the reverse DNS.</p>
</div>


<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>




  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Wagstrom</span></span>

      








  


<time datetime="2003-05-22T23:04:00-04:00" pubdate data-updated="true">May 22<span>nd</span>, 2003</time>
      

<span class="categories">
  
    <a class='category' href='/weblog/blog/categories/old/'>old</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://patrick.wagstrom.net/weblog/2003/05/22/ipv6applications/" data-via="pridkett" data-counturl="http://patrick.wagstrom.net/weblog/2003/05/22/ipv6applications/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/weblog/2003/05/22/openbsdandipv6minihow-to/" title="Previous Post: OpenBSD and IPv6 Mini How-To">&laquo; OpenBSD and IPv6 Mini How-To</a>
      
      
        <a class="basic-alignment right" href="/weblog/2003/05/23/lpdforfunandmp3playing/" title="Next Post: LPD for fun and MP3 playing">LPD for fun and MP3 playing &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weblog/2012/05/10/static-bloggin/">Static Bloggin</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/28/i-am-not-a-climatologist-and-neither-are-most-of-these-people/">I am not a climatologist, and neither are most of these people</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/10/looking-for-summer-interns-in-the-software-technology-group-at-ibm-tj-watson-research-center/">Looking for Summer Interns in the Software Technology Group at IBM TJ Watson Research Center</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/a-review-of-2011-personal-development-goals/">A Review of 2011 Personal Development Goals</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/open-source-and-technology-predictions-for-2012/">Open Source and Technology Predictions for 2012</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pridkett">@pridkett</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pridkett',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/weblog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pridkett", 4, false);
    });
  </script>
  <script src="/weblog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pridkett" class="twitter-follow-button" data-show-count="false">Follow @pridkett</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102672530623465237388?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Patrick Wagstrom -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
