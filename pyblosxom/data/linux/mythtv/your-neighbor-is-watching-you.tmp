If You've Got Comcast, Your Neighbor Could Be Watching You

<!-- Date: 2006-08-21 00:06 -->
<p>
I'm one of those fortunate folks with a pretty nice media center PC setup.
I've blogged about it many times before.  But for those who might only read
this article, here's the gist.  It's a dual core Athlon 64 with 2 pcHDTV
HD-3000 tuners, a WinTV PVR-250 tuner, and a Comcast firewire box.  Ideally
this should allow me to record 3 high definition channels at once and a
single standard definition.
</p>
<p>
Well, I've been playing with this setup, trying to figure out what I've gotten
here.  The pcHDTV HD-3000 cards can both accept QAM HDTV signals, meaning that
I can receive HDTV over cable.  For someone in Pittsburgh, this is great
because the hills are killer here.  Anyway, getting the cards to pick up the
HDTV isn't straightforward.  The issue is that with digital cable we're not
really dealing with channels anymore -- instead we're looking at frequencies
and each frequency can have multiple carrier signals.  This makes for a
rather difficult time in mapping channel 212, which is NBC to whatever it's
coming in as.  To make things more difficult, they're allowed to encrypt all
sorts of channels they're sending you.  Anything that isn't a "must carry"
is typically encrypted with 5C encryption.  So in theory, all you'll be able
to get in the clear is the broadcast channels.  In reality, most cable companies
forget a few other stations.
</p>
<p>
A long time ago, I found a little script called <a
href="/tutorials/mythTV64/files/qamscan">qamscan</a>.  After some hacking, I
improved it quite a bit and got it to the point where it scans all the
frequencies looking for carrier signals and then looks at each subprogram on
the signals and determines if they're encrypted or not.  It also tries to
figure out the station name too.  Pretty nifty overall.  What I noticed is that
there's a lot more channels that pop up than the "Must Carry" channels.  Some
of these channels are other HDTV channels that just get sent over.  This is nice
because it expands your available lineup some.  Some of these channels are
just the information channels for Comcast.  Such as the "How to use your DVR"
channel, and the preview channel.  I get a slew of ESPN radio too.
</p>
<p>
There has always been a few channels that I had trouble figuring out.  I
flagged those channels and figured I'd go back to them later.  Usually I
never did.  Well, tonight I upgraded the <a href="http://www.mythtv.org/">MythTV</a>
box to get rid of some stubborn errors and decided to look at some of
these channels.  What did I find?  Well, channels that previously looked like
things like "Nickelodeon Kids", were now quite different.  One of the channels
had a movie starring John Lithgow playing someone named "Carter", a search of
IMDB revealed that it was <a href="http://www.imdb.com/title/tt0105217/">Raising
Cain</a>.  I hopped on over to <a href="http://www.zap2it.com/">Zap2It</a>
and took a look to see if anything was playing it.
</p>
<p>
Much to my surprise, nothing was playing Raising Cain.  This was really strange,
I was clearly seeing Raising Cain on my screen, broadcast oddly in 352x480
resolution, but it was definitely that movie.  I sought out to find out where
this was coming from.  A few clicks with the remote showed that it was one of
the free movies with On Demand from Comcast.  Someone else was watching "Raising
Cain".  This is kinda interesting.
</p>
<p>
Not content to see what other people are watching, I wanted to see if it I
could pick up what I was watching.  I selected "HDTV Movies" from On Demand
and picked "Men In Black", mainly because it was free.  Although there
were many other HDTV movies that were much newer available.  Now the problem
was finding the frequency.  I started watching the movie and ran qamscan
in the background.  The process is quite slow, it takes about 30 minutes to
scan all the channels.  Afterwards it drops a bunch of files in a subdirectory
called streams.  These files are named something somewhat cryptic like
<my:verbatim>0aa-0009.ts</my:verbatim>.  Going through these mplayer is
like a treasure trove of what folks in your neighborhood are watching.
After about 10 movies, jackpot.  Men In Black, in high def, on my hard drive.
</p>
<p>
Now here is where that weird filename makes some sense.  qamscan produces
a file called list.txt, copy that <my:verbatim>~/.mplayer/channels.conf</my:verbatim>.
Then run the command <my:verbatim>mplayer dvb://0aa-0009</my:verbatim>
and voila, Men In Black in mplayer in high definition.  From here, it's
trivial for the reader to figure out how to get the program to their
hard drive.  However, you're already 30 minutes into it.  You'll need to
rewind a bit and then start recording, but it should be fine.
</p>
<p>
Unfortunately, this isn't a goldmine every time.  It's not like you'll always be
able to go back to the original frequency.  Instead you'll need to do the search
each time.  I'm working on trying to figure out if it's always on a specific subset of these frequencies
or if its completely random.  If it's always from a small subset, it should be
possible to very quickly figure out the frequency of the program and start saving
it to disk.
</p>
<p>
So this is interesting.  I'd imagine that Comcast is supposed to encrypt
these signals, but just hasn't gotten around to it.  I wonder the encryption
is part of their agreement with the studios for showing the content?  How
long will it remain like this?  Furthermore, what are the implications of
being able to know what my neighbors are watching?  Is this in violation of
some law?  I'd imagine not because anyone with a QAM capable TV set could also
pick up the channels.  How long until Comcast fixes this?  Knowing my luck, I
just killed my really good shot a getting more HD movies by blogging this.  Oh
well, here's hoping that other people can expand on this little piece of
research and let me know what they find.
</p>
<my:tags>
	<my:tag>Comcast</my:tag>
	<my:tag>HDTV</my:tag>
	<my:tag>on demand</my:tag>
	<my:tag>fair use</my:tag>
	<my:tag>pcHDTV<my:tag>
	<my:tag>mythtv</my:tag>
</my:tags>
