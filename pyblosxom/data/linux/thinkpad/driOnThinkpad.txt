Enabling DRI on a Thinkpad A31

<!-- Date: 2003-10-31 00:23 -->
<p>
As part of my <a href="http://www.casos.ece.cmu.edu/">program here</a> I've
got an IBM Thinkpad A31.  In general it's a pretty nice little system, it's
got a few issues that I'll try to document here and how I've managed to get
around them in hopes that this information can help someone else out.  
</p>
<p>
One of the most annoying things is what happened when I upgraded the kernel.
I currently run <a href="http://www.redhat.com/">RedHat 9</a> and it works
quite well.  Then I tried to upgrade the kernel from 2.4.20 to 2.4.22 because
of the improvement in the wireless drivers associated with the system.
However, this ended up killing my DRI (3d acceleration).  The reason is
because my DRI was no longer the right version (1.3 vs 1.1).  The solution,
recompile the DRI drivers and reinstall them over the ones that shipped with
the kernel.
</p>
<p>
The first step is to go and download the driver source from <a
href="http://www.xfree86.org/~alanh/">Alan H's</a> website.  Then unpack and
compile them using the command <my:verbatim>make -f
Makefile.linux</my:verbatim>.  The final step is to
copy <my:verbatim>radeon.o</my:verbatim> to
<my:verbatim>/lib/modules/2.4.22/kernel/drivers/char/drm/radeon.o</my:verbatim>.
Then either reboot or log out of X completely and reload the kernel module.
Now when you run "glxgears" you should get a good framerate (~ 1000fps).
</p>
<p>
If this still doesn't work, for instance <my:verbatim>glxgears</my:verbatim>
reports back <my:verbatim>LibGL: init failed</my:verbatim> then you should
make sure to set <my:verbatim>LIBGL_DEBUG=verbose</my:verbatim> and try running
the command again.  This can provide more information to help you debug the
problem.
</p>
