Ignoring the iPhone3G in Linux
<!-- Date: 2008-07-31 13:45 -->

<p>
About two weeks ago I picked up a pair of iPhone 3G's for me and <a
href="http://kristina.wagstrom.net/">Kristina</a>.  So far I've been
really happy with them, well, aside from the fact that they're more
or less bricks under Linux.  Not complete bricks, I can still download
photos off of them, but aside from that they're not much use.  One of
the more aggravating issues surrounding this is GNOME's insistence on
prompting me to download photos whenever I plug my phone in.  There's
an option in the dialog to ignore the device being plugged in, but
like most things in Linux, it's broken.
</p>
<p>
Luckily there is a way that requires way too much work to fix this
problem.  The system that causes this headache is called HAL, which is
the hardware abstraction layer.  In general it's a good thing because
it also makes things like USB memory sticks show up when you plug them
in.  There's a nifty little trick you can use to cause HAL to ignore
your iPhone 3G when you plug it.  Simply create the file
<my:filename>/etc/hal/fdi/preprobe/10-iphone3g.fdi</my:filename> and
drop in the following contents:
</p>
<code language="xml">
<?xml version="1.0" encoding="UTF-8"?>
<deviceinfo version="0.2">
  <device>
    <match key="usb.vendor_id" int="05ac">
      <match key="usb.product_id" int="1292">
        <merge key="info.ignore" type="bool">true</merge>
      </match>
    </match>
  </device>
</deviceinfo>
</code>
<p>
Basically, this code tells the HAL subsystem to ignore anything with a
USB vendor_id of 0x05ac and a USB product_id of 0x1292.  If it doesn't
seem to work, use the command <my:command>lsusb</my:command> to see
what the values are for your phone.  Finally, after creating this
file, run <my:command>/etc/init.d/dbus restart</my:command> as root to
fix the problem.  At this point your system should no longer bother
you whenever your iPhone 3G gets plugged in.
</p>
<p>
Now, if the fine folks at <a href="http://www.sun.com/">Sun</a> could
just make it so <a href="http://www.virtualbox.org/">VirtualBox</a>
can <a href="http://www.virtualbox.org/ticket/491">connect to an
iPhone</a> that would be wonderful.
</p>
<my:tags>
    <my:tag>iphone</my:tag>
    <my:tag>linux</my:tag>
    <my:tag>hal</my:tag>
    <my:tag>dbus</my:tag>
    <my:tag>sun</my:tag>
    <my:tag>virtualbox</my:tag>
</my:tags>
