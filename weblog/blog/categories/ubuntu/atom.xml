<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ubuntu | My Delusional Dream]]></title>
  <link href="http://patrick.wagstrom.net/weblog/blog/categories/ubuntu/atom.xml" rel="self"/>
  <link href="http://patrick.wagstrom.net/weblog/"/>
  <updated>2012-05-12T20:51:14-04:00</updated>
  <id>http://patrick.wagstrom.net/weblog/</id>
  <author>
    <name><![CDATA[Patrick Wagstrom]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Context Switches on Ubuntu]]></title>
    <link href="http://patrick.wagstrom.net/weblog/2005/12/07/context-switches/"/>
    <updated>2005-12-07T14:08:00-05:00</updated>
    <id>http://patrick.wagstrom.net/weblog/2005/12/07/context-switches</id>
    <content type="html"><![CDATA[<p>After trying a new motherboard and all that jazz to get my HDTV tuner card working
properly I decided to try a new operating system.  The thing that prompted this was
the notice that some people thought it might be a buffer related issue that was
causing some of the reception problems with the card.  I also noticed that my system
was consistently above 2000 context switches a second even when idle.  There was
usually around 1100 interrupts a second.  I compared this to my RHEL AS box which
was around 30/s when idle and running a lot more stuff.</p>

<p>So, today I set out to test this theory some.  I dropped in a FC4 x86_64 dvd and
installed it on a blank partition on my hard disk.  Sure enough, preliminary tests
indicate that I'm not loosing data and reception remains clear even when I'm under
heavy IO load, such as copying a file over.</p>

<p>So here's my theory.  Ubuntu uses a kernel that switches tasks more often to create
a more interactive computing experience.  However, for devices that produce large
amounts of streaming bandwidth, such as HDTV tuner cards (and to a lesser degree
SDTV tuner cards), the tasks switch too fast and the buffers never can be completely
emptied.  By switching to a higher minimum time slice the processor has enough time
to empty out the buffers.</p>

<p>Now, the question is this: is there a simple way to change the minimum time slice
for tasks under Ubuntu?  I remember seeing something where I could set the timer at
10, 100, or 1000 and seeing that it was set to 1000, but I can't find it in the
kernel configuration anymore.</p>

<p>Anyway, if you're having HDTV reception problems, I strongly suggest looking at this
as an issue.  I'm not 100% certain, but the preliminary tests are good.  Unfortunately,
I can't do the full battery yet because I don't have time and I don't even have
video working on MythTV box under Fedora.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Loki Games Under Ubuntu : Alpha Centauri]]></title>
    <link href="http://patrick.wagstrom.net/weblog/2005/03/07/alphacentauri/"/>
    <updated>2005-03-07T17:25:00-05:00</updated>
    <id>http://patrick.wagstrom.net/weblog/2005/03/07/alphacentauri</id>
    <content type="html"><![CDATA[<p>It's spring break so I decided I would play a few video games.  I've got
a bunch of the old Linux ports of games from
<a href="http://www.lokigames.com/">LokiGames</a> (which went bankrupt in
a mess of supposed lies and missed payments in January, 2002).  Unfortunately,
these games need some work to function in Linux.  Well, at least the ones that
I've tried.</p>

<p>For Alpha Centauri, you should first go and fetch the patch for SMAC.  The
updates can be found at
<a href="ftp://sunsite.dk/mirrors/lokigames/updates/">sunsite.dk</a>.  Go
and download that.  Also, go and download the updated version of loki_patch
from <a href="http://icculus.org/~msphil/loki/x86/">icculus</a>.  Now, install
the game as you would normally.  The install worked just fine under my
version of Ubuntu (Warty, aka 4.10).</p>

<p>The tricky part comes with patching Alpha Centauri.  Running the patch generates
the following output:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Verifying archive integrity...OK
</span><span class='line'>Uncompressing Sid Meier's Alpha Centauri 6.0a Update...................
</span><span class='line'>./update.sh: line 60: 11336 Segmentation fault      loki_patch --verify patch.dat
</span><span class='line'>The program returned an error code (1)</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>This clearly isn't right.  So instead of running the patch normally, we've got
to do a bit of work.  Instead, run the patch with
<code>sh ./smac-6.0a-x86.run --keep</code>, this will preserve
the unarchived files in a directory called
<code>smac-6.0a-x86</code>.  Copy the new version of <code>loki_patch</code>
to <code>smac-6.0a-x86/bin/Linux/x86/loki_patch</code>.  Then go into the directory and
run <code>update.sh</code>.</p>

<p>So now we've got a nice updated version of Alpha Centauri, but it still wasn't
spitting out sound on my version of Ubuntu (I've mangled some stuff with
regards to <a href="http://http://www.alsa-project.org/">ALSA</a> and ESD.
Also, I've read that there are some other issues with kernel versions.  To fix
this I created a little script and use this to run SMAC.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;!/bin/sh&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;LD_ASSUME_KERNEL<span class="o">=</span>2.4.6 <span class="nv">SDL_AUDIODRIVER</span><span class="o">=</span>esd /usr/local/games/smac/smacpack <span class="nv">$*</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>It may be possible to do other fun stuff using the
<a href="ftp://ptah.lnf.kth.se/pub/misc/sdl-env-vars">other SDL environment variables</a>.
As a side note, I could not get the dynamic version to function
properly, which is bummer because it means that I can't really update
the libraries and try other fun stuff with them.</p>

<p>As I play with other old games I'll post updates on how to get them going
in the weblog.</p>
]]></content>
  </entry>
  
</feed>
