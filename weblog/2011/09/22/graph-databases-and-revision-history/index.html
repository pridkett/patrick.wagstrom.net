
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Graph Databases and Revision History - My Delusional Dream</title>
  <meta name="author" content="Patrick Wagstrom">

  
  <meta name="description" content="Graph Databases and Revision History Sep 22nd, 2011 | var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://patrick.wagstrom.net/weblog/2011/09/22/graph-databases-and-revision-history">
  <link href="/weblog/favicon.png" rel="icon">
  <link href="/weblog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/weblog/javascripts/modernizr-2.0.js"></script>
  <script src="/weblog/javascripts/ender.js"></script>
  <script src="/weblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/weblog/atom.xml" rel="alternate" title="My Delusional Dream" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/weblog/">My Delusional Dream</a></h1>
  
    <h2>Thoughts of a cautious technocrat</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/weblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:patrick.wagstrom.net/weblog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/weblog/">Blog</a></li>
  <li><a href="/weblog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Graph Databases and Revision History</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-22T19:34:54-04:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2011</time>
        
        
         | 

<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>


        
      </p>
    
  </header>


<div class="entry-content"><p>Graph databases such as <a href="http://www.neo4j.org/">Neo4j</a>, <a href="http://www.orientechnologies.com/orient-db.htm">OrientDB</a>, and <a href="http://www.infinitegraph.com/">InifiniteGraph</a> are useful tools for social science researchers because localized queries are a function of only the number of links relative to the nodes in question. In contrast, relational databases, such as <a href="http://www.mysql.com/">MySQL</a> and <a href="http://www.postgresql.org/">PostgreSQL</a>, suffer performance degradation as more nodes are added because of the number of entries in join tables and the computational difficulty of finding the relevant edges in the indexes.</p>

<p>For my own research I&#8217;ve been exploring some issues around Open Source software development and Twitter using graph databases, and thus far it&#8217;s been very interesting. However, one thing that I haven&#8217;t yet found is an easy way to maintain version history for nodes and edges. In this entry I discuss a strategy that I&#8217;ve found to be effective for managing revisions of items with a small number of links.</p>

<p>Let&#8217;s assume that you have a system such as a corporate directory where each user has a set of skills that they can self-declare. For example, there may be a user who identifies himself as being an expert in LAMP stack: Linux, Apache, MySQL, and Python. This can be represented as a very simple graph:</p>

  <figure class='center'>
        <img src="/weblog/media/2011/09/GraphRevision1.png">
        <figcaption>Simple network showing relation between a user and his declared skills </figcaption>
    </figure>


<p>This works very well if the only source of data about skills is the user. However, in reality information about a users skills can be obtained from a variety of other resources such as project and work item assignment, natural language processing or artifacts (tweets, email, etc), or surveys of other employees within the company. If that&#8217;s the case we&#8217;ll want to break the source of set of skills into a new node and link it to the user.</p>

  <figure class='center'>
        <img src="/weblog/media/2011/09/GraphRevision2.png">
        <figcaption>Connection between a user and his skills with an intermediary node to identify the source of the skills </figcaption>
    </figure>


<p>If we had multiple sources we&#8217;d just have multiple nodes similar to the cyan node labeled &#8220;User1Skills&#8221; in the diagram above. However, what happens if the user is no longer interested in Python and Apache and instead has concluded that listing Ruby is a better option for his skills? How do we store his updated set of skills? The simplest thing to do is to only look at the current set of skills and loose the data from the previous set of skills.</p>

<p>But that may not be ideal because there&#8217;s a chance that at some point previous states could be very important. For example, what if there was another user, User2, who wrote some critical Python code then later left the company? User1 may be the only person who ever had experience with Python and throwing away this previous state may prove costly. Instead what we can do is to create a new User1Skills node and connect it to User1 with the same CURRENT_SKILLS edge, but also connect it to the previous User1Skills node with an edge labeled PREVIOUS_STATE.</p>

  <figure class='center'>
        <img src="/weblog/media/2011/09/GraphRevision3.png">
        <figcaption>Managing a single previous state of User1&#8217;s skill set as shown by the PREVIOUS_STATE edge linking to the older state </figcaption>
    </figure>


<p>This can be easily expanded when to include multiple previous states but creating new User1Skills nodes, linking it to the appropriate skills, changing the destination of the CURRENT_SKILLS link and creating a new PREVIOUS_STATE link to the old state. The advantage is that this method is essentially constant time for the number of previous states as we&#8217;re just rewiring a couple of different nodes.</p>

  <figure class='center'>
        <img src="/weblog/media/2011/09/GraphRevision4.png">
        <figcaption>Multiple PREVIOUS_STATE edges and nodes can be used to indicate that there are many previous states for this user. Additions of previous states are done in constant time. </figcaption>
    </figure>


<h3>Querying the Graph</h3>

<p>We can continue like this ad infinitum for whenever we get an update of new skills. However at some point we&#8217;ll need to actually traverse this graph to make use of this historic skill sets of individuals in the network. I&#8217;ll talk about three different types of queries: listing all the current skills in the organization, listing User1&#8217;s skills at an arbitrary time in the past, and taking a skill that is not a current skill for any user and figuring out which user had the skill in the past.</p>

<p>I&#8217;ll demonstrate the queries using <a href="https://github.com/tinkerpop/gremlin">Gremlin</a>, a <a href="http://groovy.codehaus.org/">Groovy</a> based domain specific language for graph traversals. If you&#8217;d like to play along at home, I&#8217;ve made the previous figure available as <a href="http://patrick.wagstrom.net/misc/revisions.graphml">a GraphML file that you can download</a>.</p>

<p>First, lets get started by firing up Gremlin and loading the GraphML file in to the Gremlin REPL.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">$</span> <span class="o">.</span><span class="s">/gremlin.sh</span>
</span><span class='line'><span class="s">         \,,,/</span>
</span><span class='line'>         <span class="o">(</span><span class="n">o</span> <span class="n">o</span><span class="o">)</span>
</span><span class='line'><span class="o">-----</span><span class="n">oOOo</span><span class="o">-(</span><span class="n">_</span><span class="o">)-</span><span class="n">oOOo</span><span class="o">-----</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="o">()</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">tinkergraph</span><span class="o">[</span><span class="nl">vertices:</span><span class="mi">0</span> <span class="nl">edges:</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GraphMLReader</span><span class="o">(</span><span class="n">g</span><span class="o">)</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">com</span><span class="o">.</span><span class="na">tinkerpop</span><span class="o">.</span><span class="na">blueprints</span><span class="o">.</span><span class="na">pgm</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">graphml</span><span class="o">.</span><span class="na">GraphMLReader</span><span class="err">@</span><span class="mi">3</span><span class="n">ebc312f</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">reader</span><span class="o">.</span><span class="na">inputGraph</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s2">&quot;test.graphml&quot;</span><span class="o">))</span>
</span><span class='line'><span class="o">==&gt;</span><span class="kc">null</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">tinkergraph</span><span class="o">[</span><span class="nl">vertices:</span><span class="mi">10</span> <span class="nl">edges:</span><span class="mi">13</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Listing All Current Skills in the Organization</h4>

<p>There are two ways to traverse to get all of the currently active skill nodes. Either we can start with each person, follow the CURRENT_SKILLS link and then SKILLS link, or we can can start with each skill and traverse backwards.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">.</span><span class="na">filter</span><span class="o">{</span><span class="n">it</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;type&quot;</span><span class="o">)==</span><span class="s2">&quot;PERSON&quot;</span><span class="o">}.</span><span class="na">out</span><span class="o">(</span><span class="s2">&quot;CURRENT_SKILLS&quot;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s2">&quot;SKILL&quot;</span><span class="o">).</span><span class="na">title</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">MySQL</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Rails</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Ruby</span>
</span></code></pre></td></tr></table></div></figure>


<p>Starting from the skills themselves requires a bit more logic as we&#8217;ll end up with multiple paths to a person. We take advantage of Gremlin&#8217;s ability to backtrack here and get the information about the actual skills.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">.</span><span class="na">as</span><span class="o">(</span><span class="s2">&quot;skill&quot;</span><span class="o">).</span><span class="na">filter</span><span class="o">{</span><span class="n">it</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;type&quot;</span><span class="o">)==</span><span class="s2">&quot;SKILL&quot;</span><span class="o">}.</span><span class="na">in</span><span class="o">(</span><span class="s2">&quot;SKILL&quot;</span><span class="o">).</span><span class="na">in</span><span class="o">(</span><span class="s2">&quot;CURRENT_SKILLS&quot;</span><span class="o">).</span><span class="na">back</span><span class="o">(</span><span class="s2">&quot;skill&quot;</span><span class="o">).</span><span class="na">title</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Rails</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">MySQL</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Ruby</span>
</span></code></pre></td></tr></table></div></figure>


<p>If we were in a more complex environment and wanted to how many times each skill appeared in the set of active skills we could use the following code which counts the number of times each skill title appears in the set:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="o">[:];</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">.</span><span class="na">filter</span><span class="o">{</span><span class="n">it</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;type&quot;</span><span class="o">)==</span><span class="s2">&quot;PERSON&quot;</span><span class="o">}.</span><span class="na">out</span><span class="o">(</span><span class="s2">&quot;CURRENT_SKILLS&quot;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s2">&quot;SKILL&quot;</span><span class="o">).</span><span class="na">title</span><span class="o">.</span><span class="na">groupCount</span><span class="o">(</span><span class="n">m</span><span class="o">)</span> <span class="o">&gt;&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">m</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">MySQL</span><span class="o">=</span><span class="mi">1</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Rails</span><span class="o">=</span><span class="mi">1</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Ruby</span><span class="o">=</span><span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Listing User1&#8217;s Skills in the Past</h4>

<p>To list all of User1&#8217;s skills at some point in the past we can first need to store when the skill sets were collected. I use a property called timestamp that includes a simple unix timestamp for when the data was collected. Within Groovy (and thus Gremlin), you can get a timestamp for a date using the following bit of code:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">SimpleDateFormat</span><span class="o">(</span><span class="s2">&quot;yyyy-MM-DD hh:mm&quot;</span><span class="o">)</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">java</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">SimpleDateFormat</span><span class="err">@</span><span class="mi">23084</span><span class="n">c3a</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">formatter</span><span class="o">.</span><span class="na">setTimeZone</span><span class="o">(</span><span class="n">TimeZone</span><span class="o">.</span><span class="na">getTimeZone</span><span class="o">(</span><span class="s2">&quot;UTC&quot;</span><span class="o">))</span>
</span><span class='line'><span class="o">==&gt;</span><span class="kc">null</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">formatter</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s2">&quot;2011-07-04 12:00&quot;</span><span class="o">).</span><span class="na">getTime</span><span class="o">()/</span><span class="mi">1000</span>
</span><span class='line'><span class="o">==&gt;</span><span class="mi">1294099200</span>
</span></code></pre></td></tr></table></div></figure>


<p>Within our the data set I&#8217;ve set the timestamp field of the SKILLSET nodes to be midnight UTC on January 1, 2011, 2010, and 2009 respectively. We can pick a date and then execute the query to get the users skill set as of that date. However, this query is a little messy and needs to utilize the <a href="http://tinkerpop.com/maven2/com/tinkerpop/pipes/0.7/api/com/tinkerpop/pipes/branch/IfThenElsePipe.html">ifThenElse pipe</a> within Gremlin. The reason is because what we really need is a while loop, and the loop mechanism in Gremlin is a do loop.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">user1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">.</span><span class="na">filter</span><span class="o">{</span><span class="n">it</span><span class="o">.</span><span class="na">title</span><span class="o">==</span><span class="s2">&quot;User1&quot;</span><span class="o">}.</span><span class="na">next</span><span class="o">()</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">sd</span> <span class="o">=</span> <span class="n">formatter</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s2">&quot;2010-01-02 00:00&quot;</span><span class="o">).</span><span class="na">getTime</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1000</span>
</span><span class='line'><span class="o">==&gt;</span><span class="mi">1262390400</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">user1</span><span class="o">.</span><span class="na">out</span><span class="o">(</span><span class="s2">&quot;CURRENT_SKILLS&quot;</span><span class="o">).</span><span class="na">ifThenElse</span><span class="o">{</span><span class="n">it</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;timestamp&quot;</span><span class="o">)</span> <span class="o">&lt;</span> <span class="n">sd</span><span class="o">}{</span><span class="n">it</span><span class="o">}{</span><span class="n">it</span><span class="o">.</span><span class="na">as</span><span class="o">(</span><span class="s2">&quot;ss&quot;</span><span class="o">).</span><span class="na">out</span><span class="o">(</span><span class="s2">&quot;PREVIOUS_STATE&quot;</span><span class="o">).</span><span class="na">loop</span><span class="o">(</span><span class="s2">&quot;ss&quot;</span><span class="o">){</span><span class="n">it</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;timestamp&quot;</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">}}.</span><span class="na">out</span><span class="o">(</span><span class="s2">&quot;SKILL&quot;</span><span class="o">).</span><span class="na">title</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">MySQL</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Linux</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">Ruby</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Finding out Which User&#8217;s Currently Have the Skill or Had it in the Past</h4>

<p>In this example we&#8217;ll traverse the graph to find the users who at one point in time had the Python skill. As before, because Gremlin only has a do loop and not a while loop, we need to do the crazy ifThenElse condition to check the initial condition. By artfully removing the ifThenElse we can eliminate the condition when a user currently has the skill and only list users who had the skill appear in a previous update.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">skill</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="na">V</span><span class="o">.</span><span class="na">filter</span><span class="o">{</span><span class="n">it</span><span class="o">.</span><span class="na">title</span><span class="o">==</span><span class="s2">&quot;Python&quot;</span><span class="o">}.</span><span class="na">next</span><span class="o">()</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">v</span><span class="o">[</span><span class="mi">12</span><span class="o">]</span>
</span><span class='line'><span class="n">gremlin</span><span class="o">&gt;</span> <span class="n">skill</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="s2">&quot;SKILL&quot;</span><span class="o">).</span><span class="na">ifThenElse</span><span class="o">{</span><span class="n">it</span><span class="o">.</span><span class="na">inE</span><span class="o">(</span><span class="s2">&quot;CURRENT_SKILLS&quot;</span><span class="o">).</span><span class="na">hasNext</span><span class="o">()}{</span><span class="n">it</span><span class="o">}{</span><span class="n">it</span><span class="o">.</span><span class="na">as</span><span class="o">(</span><span class="s2">&quot;ss&quot;</span><span class="o">).</span><span class="na">in</span><span class="o">(</span><span class="s2">&quot;PREVIOUS_STATE&quot;</span><span class="o">).</span><span class="na">loop</span><span class="o">(</span><span class="s2">&quot;ss&quot;</span><span class="o">){!</span><span class="n">it</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">inE</span><span class="o">(</span><span class="s2">&quot;CURRENT_SKILLS&quot;</span><span class="o">).</span><span class="na">hasNext</span><span class="o">()}}.</span><span class="na">in</span><span class="o">(</span><span class="s2">&quot;CURRENT_SKILLS&quot;</span><span class="o">).</span><span class="na">title</span><span class="o">.</span><span class="na">unique</span><span class="o">()</span>
</span><span class='line'><span class="o">==&gt;</span><span class="n">User1</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Drawbacks and Limitations to the Method</h3>

<p>There are some notable drawbacks to this method. The most notable and obvious is how messy some of these graph traversals are because of the need to use ifThenElse pipes. Fortunately, after pinging people on the Gremlin list it seems as though they&#8217;re amenable to creating different types of pipes include a while pipe.</p>

<p>The other issue is that this mechanism doesn&#8217;t work well for a situation such as <a href="http:/www.twitter.com/">Twitter</a>. In a system like Twitter where each user can have hundreds or thousands outgoing links this will create a huge number of extra edges that aren&#8217;t actually active but slow down the traversals. Perhaps a better way to handle these links is to add properties to the edges that indicate when the edge was added or removed. I&#8217;ll try to address these in a future post.</p>

<p>Do you have any suggestions for how to handle revisions in a graph database? Leave them here and maybe we can up with a great solution.</p>
</div>


<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>




  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Wagstrom</span></span>

      








  


<time datetime="2011-09-22T19:34:54-04:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/weblog/blog/categories/research/'>research</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://patrick.wagstrom.net/weblog/2011/09/22/graph-databases-and-revision-history/" data-via="pridkett" data-counturl="http://patrick.wagstrom.net/weblog/2011/09/22/graph-databases-and-revision-history/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/weblog/2011/09/18/observations-on-the-air-france-a380-and-its-in-flight-entertainment-system/" title="Previous Post: Observations on the Air France A380 and Its In Flight Entertainment System">&laquo; Observations on the Air France A380 and Its In Flight Entertainment System</a>
      
      
        <a class="basic-alignment right" href="/weblog/2011/09/23/recent-academic-work-the-onion-patch-and-engineering-software-engineering-teams/" title="Next Post: Recent Academic Work: The Onion Patch and Engineering Software Engineering Teams">Recent Academic Work: The Onion Patch and Engineering Software Engineering Teams &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weblog/2012/05/10/static-bloggin/">Static Bloggin</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/28/i-am-not-a-climatologist-and-neither-are-most-of-these-people/">I am not a climatologist, and neither are most of these people</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/10/looking-for-summer-interns-in-the-software-technology-group-at-ibm-tj-watson-research-center/">Looking for Summer Interns in the Software Technology Group at IBM TJ Watson Research Center</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/a-review-of-2011-personal-development-goals/">A Review of 2011 Personal Development Goals</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/open-source-and-technology-predictions-for-2012/">Open Source and Technology Predictions for 2012</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pridkett">@pridkett</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pridkett',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/weblog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pridkett", 4, false);
    });
  </script>
  <script src="/weblog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pridkett" class="twitter-follow-button" data-show-count="false">Follow @pridkett</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102672530623465237388?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Patrick Wagstrom -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
