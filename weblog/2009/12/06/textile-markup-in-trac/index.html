
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Textile Markup in Trac - My Delusional Dream</title>
  <meta name="author" content="Patrick Wagstrom">

  
  <meta name="description" content="Textile Markup in Trac Dec 6th, 2009 | var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url; &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://patrick.wagstrom.net/weblog/2009/12/06/textile-markup-in-trac">
  <link href="/weblog/favicon.png" rel="icon">
  <link href="/weblog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/weblog/javascripts/modernizr-2.0.js"></script>
  <script src="/weblog/javascripts/ender.js"></script>
  <script src="/weblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/weblog/atom.xml" rel="alternate" title="My Delusional Dream" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/weblog/">My Delusional Dream</a></h1>
  
    <h2>Thoughts of a cautious technocrat</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/weblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:patrick.wagstrom.net/weblog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/weblog/">Blog</a></li>
  <li><a href="/weblog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Textile Markup in Trac</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-06T19:46:57-05:00" pubdate data-updated="true">Dec 6<span>th</span>, 2009</time>
        
        
         | 

<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>


        
      </p>
    
  </header>


<div class="entry-content"><p>For a new secret project I’ve been putting together an installation of Trac to provide a web interface for task management. I found myself wanting to create a nice looking table within a Trac wiki page to document different dependencies needed by the software. In a normal installation there are three different ways to do this:</p>

<h2>Trac’s Wiki Formatting</h2>

<p>This is probably the simplest option, however it’s also the most limiting, there is no way to provide additional styling to elements and you can’t create columns that span multiple rows or columns.  The lack of additional styling is particularly difficult because you can’t correct it easily with CSS without modifying all of the tables.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='moin'><span class='line'><span class="c">||</span> <span class="c">&#39;&#39;&#39;</span>Client Side Packages<span class="c">&#39;&#39;&#39;</span> <span class="c">||</span>
</span><span class='line'><span class="c">||</span> <span class="c">&#39;&#39;&#39;</span>Package<span class="c">&#39;&#39;&#39;</span> <span class="c">||</span> <span class="c">&#39;&#39;&#39;</span>License<span class="c">&#39;&#39;&#39;</span> <span class="c">||</span> <span class="c">&#39;&#39;&#39;</span>Purpose<span class="c">&#39;&#39;&#39;</span> <span class="c">||</span>
</span><span class='line'><span class="c">||</span> <span class="k">[http://jquery.com/</span><span class="s"> jQuery</span><span class="k">]</span> <span class="c">||</span> <span class="k">[http://docs.jquery.com/Licensing</span><span class="s"> MIT or GPL</span><span class="k">]</span> (choice) <span class="c">||</span> General Purpose javascript <span class="c">||</span>
</span><span class='line'><span class="c">||</span> <span class="k">[http://raphaeljs.com/</span><span class="s"> Raphaël</span><span class="k">]</span> <span class="c">||</span> <span class="k">[http://raphaeljs.com</span><span class="s"> MIT</span><span class="k">]</span> (see sidebar) <span class="c">||</span> Vector graphics library <span class="c">||</span>
</span><span class='line'><span class="c">||</span> <span class="c">&#39;&#39;&#39;</span>Server Side Packages<span class="c">&#39;&#39;&#39;</span> <span class="c">||</span>
</span><span class='line'><span class="c">||</span> <span class="k">[http://www.djangoproject.com/</span><span class="s"> Django</span><span class="k">]</span> <span class="c">||</span> <span class="k">[http://code.djangoproject.com/browser/django/trunk/LICENSE</span><span class="s"> BSD</span><span class="k">]</span> <span class="c">||</span> Server framework <span class="c">||</span>
</span><span class='line'><span class="c">||</span> <span class="k">[http://pinaxproject.com/</span><span class="s"> Pinax</span><span class="k">]</span> <span class="c">||</span> <span class="k">[http://github.com/pinax/pinax/blob/master/LICENSE</span><span class="s"> MIT</span><span class="k">]</span> <span class="c">||</span> Server social components <span class="c">||</span>
</span><span class='line'><span class="c">||</span> <span class="k">[http://www.sqlite.org/</span><span class="s"> SQLite</span><span class="k">]</span> <span class="c">||</span> <span class="k">[http://www.sqlite.org/copyright.html</span><span class="s"> Public Domain</span><span class="k">]</span> <span class="c">||</span> Server database <span class="c">||</span>
</span></code></pre></td></tr></table></div></figure>




  <figure class='center'>
        <img src="/weblog/media/2009/12/trac-table.png">
        <figcaption>Table output using Trac Wiki Processing </figcaption>
    </figure>


<h2>HTML</h2>

<p>HTML is of course, the go to for all of this.  However, the whole reason I started looking at this is that I didn’t want to embed a huge chunk of HTML into my wiki page.  I know I can do all the formatting I want, but this really isn’t an option.</p>

<h2>ReStructured Text</h2>

<p>ReStructured Text is the preferred markup language of Python documentation.  It’s more robust than Trac Wiki formatting, especially for tables.  The processor for ReStructured Text in Trac is smart enough to tag tables with the class ‘docutils’ which helps out immensely when trying to style the documents.  This allows for the creation of some prettier tables.  It also allows the creation of header columns and multi-column/row cells.  However, it’s not great for this sort of general purpose document, for two reasons.  First,  it doesn’t allow for a header row to appear in the middle of the table.  I’d really like these to be part of the same table.  Secondly, you can’t have multiple short links with the same name.  So, I can have the name ‘MIT’ link to two different pages without doing implicit links.  However, this introduces a new third problem, which is that table cells are proportional in width to the RST equivalent.  Here’s the sample table structured in RST:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='rest'><span class='line'>+--------------+----------------------------------------------------------------------+----------------------------+
</span><span class='line'><span class="o">|</span> Client Side Packages                                                                                             |
</span><span class='line'>+--------------+----------------------------------------------------------------------+----------------------------+
</span><span class='line'><span class="o">|</span> Package      | License                                                              | Purpose                    |
</span><span class='line'>+==============+======================================================================+============================+
</span><span class='line'><span class="o">|</span> jQuery_      | <span class="s">`MIT or GPL </span><span class="si">&lt;http://docs.jquery.com/Licensing&gt;</span><span class="s">`__</span> (choice)           | General JavaScript library |
</span><span class='line'>+--------------+----------------------------------------------------------------------+----------------------------+
</span><span class='line'><span class="o">|</span> Raphaël_     | <span class="s">`MIT </span><span class="si">&lt;http://raphaeljs.com/&gt;</span><span class="s">`__</span> (see sidebar)                        | SVG/VML Library            |
</span><span class='line'>+--------------+----------------------------------------------------------------------+----------------------------+
</span><span class='line'>
</span><span class='line'>|
</span><span class='line'>
</span><span class='line'>+--------------+----------------------------------------------------------------------+---------------------------+
</span><span class='line'><span class="o">|</span> Server Side Packages                                                                                            |
</span><span class='line'>+--------------+----------------------------------------------------------------------+---------------------------+
</span><span class='line'><span class="o">|</span> Package      | License                                                              | Purpose                   |
</span><span class='line'>+==============+======================================================================+===========================+
</span><span class='line'><span class="o">|</span> Django_      | <span class="s">`BSD </span><span class="si">&lt;http://code.djangoproject.com/browser/django/trunk/LICENSE&gt;</span><span class="s">`__</span> | Server framework          |
</span><span class='line'>+--------------+----------------------------------------------------------------------+---------------------------+
</span><span class='line'><span class="o">|</span> Pinax_       | <span class="s">`MIT </span><span class="si">&lt;http://github.com/pinax/pinax/blob/master/LICENSE&gt;</span><span class="s">`__</span>          | Server social components  |
</span><span class='line'>+--------------+----------------------------------------------------------------------+---------------------------+
</span><span class='line'><span class="o">|</span> SQLite_      | <span class="s">`Public Domain </span><span class="si">&lt;http://www.sqlite.org/copyright.html&gt;</span><span class="s">`__</span>             | Server database           |
</span><span class='line'>+--------------+----------------------------------------------------------------------+---------------------------+
</span><span class='line'>
</span><span class='line'><span class="p">..</span> <span class="nt">_jQuery:</span> http://jquery.com/
</span><span class='line'><span class="p">..</span> <span class="nt">_Raphaël:</span> http://raphaeljs.com/
</span><span class='line'><span class="p">..</span> <span class="nt">_Django:</span> http://www.djangoproject.com/
</span><span class='line'><span class="p">..</span> <span class="nt">_Pinax:</span> http://pinaxproject.com/
</span><span class='line'><span class="p">..</span> <span class="nt">_SQLite:</span> http://www.sqlite.org/
</span></code></pre></td></tr></table></div></figure>


<p>Unfortunately, this results in tables that are unnaturally wide and must be split into two different tables.  While the result is passable, especially after throwing down some CSS to help out and collapse those ugly borders, the width of the tables makes them look highly awkward, and therefor unacceptable.</p>

  <figure class='center'>
        <img src="/weblog/media/2009/12/rst-table.png">
        <figcaption>Output using ReStructured Text </figcaption>
    </figure>


<h2>Markdown</h2>

<p>Markdown is the hotness markup language that all of the web 3.0 kiddies like to use. And why not?  It’s from John Gruber, macboy extraordinairre!  Markdown is designed to be wholly readable without people needing to know how to speak HTML.  It’s quick and easy to use.  There’s a pretty good markdown processor available for Trac.  However, there are a few shortcomings.  First, by default Markdown has no support for tables, so you’ll need to drop back to HTML for the formatting.  This is less than ideal as it’s messy again.  Furthermore you cannot use Markdown inside of an HTML table.</p>

<p>Fortunately, there are some extensions to Markdown that provide support for tables.  As is normal for this sort of community, it’s been further extended to allow for all sorts of crazy formatting and alignment issues.  However, as near as I can tell it still does not allow cells to span multiple columns/rows.  Or, if it does, the Markdown plugin for Trac doesn’t support it.  I didn’t really get far enough to generate anything really interesting with Markdown.</p>

<h2>Textile</h2>

<p>In the world of Web 2.0 fanboys, the other competing markup, favored by the Ruby guys and folks at GitHub, is Textile.  It’s slightly similar to Markdown, in that it aims to be fairly readable, but advanced features let you do neat stuff at the expense of some readability.  Fortunately, using Textile I was able to make the table look exactly like I wanted to.  Although Textile allows you to use multiple header rows, I did have to apply some simple CSS styling to the header columns and rows.  Here’s the Textile I used.</p>

<p>Liquid error: ClassNotFound: no lexer for alias &#8216;textile&#8217; found</p>

<p>And here is the actual output from Trac after rendering the Textile (after a little bit of help from some CSS:</p>

  <figure class='center'>
        <img src="/weblog/media/2009/12/textile-table.png">
        <figcaption>Table output using Textile processor </figcaption>
    </figure>


<h2>Trac Textile Macro</h2>

<p>To get this far I needed to write a simple little Trac processing macro for Textile. Using information from the excellent Markdown Macro I was able to hack together a simple Textile Macro for Trac.  Before installing it you’ll need to install the Python Textile libraries.  Then, you can clone the git repository from git://github.com/pridkett/tractextilemacro.git.  From here you can install it like a normal Trac component.  Enable it in your trac.ini using these lines:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[components]
</span><span class='line'>Textile.* = enabled</span></code></pre></td></tr></table></div></figure>


<p>Now, just embed your Textile code in a block like this and you’ll be
on your way. Remove the double backslashes at the top of the block,
they&#8217;re only there because otherwise Octopress chokes.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>\\{\\{\\{
</span><span class='line'>#!Textile
</span><span class='line'> 
</span><span class='line'>Hello from the __magical__ land of "Textile":http://textile.thresholdstate.com/!
</span><span class='line'>}}}</span></code></pre></td></tr></table></div></figure>



</div>


<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>




  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Wagstrom</span></span>

      








  


<time datetime="2009-12-06T19:46:57-05:00" pubdate data-updated="true">Dec 6<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/weblog/blog/categories/code/'>code</a>, <a class='category' href='/weblog/blog/categories/python/'>python</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://patrick.wagstrom.net/weblog/2009/12/06/textile-markup-in-trac/" data-via="pridkett" data-counturl="http://patrick.wagstrom.net/weblog/2009/12/06/textile-markup-in-trac/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/weblog/2009/11/25/shutting-down-pennave/" title="Previous Post: Shutting Down PennAve">&laquo; Shutting Down PennAve</a>
      
      
        <a class="basic-alignment right" href="/weblog/2009/12/13/wouldnt-it-be-great-if-there-was-a-stackoverflow-for-that/" title="Next Post: Wouldn't it be great if there was a StackOverflow for that?">Wouldn't it be great if there was a StackOverflow for that? &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weblog/2012/05/10/static-bloggin/">Static Bloggin</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/28/i-am-not-a-climatologist-and-neither-are-most-of-these-people/">I am not a climatologist, and neither are most of these people</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/10/looking-for-summer-interns-in-the-software-technology-group-at-ibm-tj-watson-research-center/">Looking for Summer Interns in the Software Technology Group at IBM TJ Watson Research Center</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/a-review-of-2011-personal-development-goals/">A Review of 2011 Personal Development Goals</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/open-source-and-technology-predictions-for-2012/">Open Source and Technology Predictions for 2012</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pridkett">@pridkett</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pridkett',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/weblog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pridkett", 4, false);
    });
  </script>
  <script src="/weblog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pridkett" class="twitter-follow-button" data-show-count="false">Follow @pridkett</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102672530623465237388?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Patrick Wagstrom -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
