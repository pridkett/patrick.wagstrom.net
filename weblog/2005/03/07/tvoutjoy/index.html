
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TV Out Joy! - My Delusional Dream</title>
  <meta name="author" content="Patrick Wagstrom">

  
  <meta name="description" content="TV Out Joy! Mar 7th, 2005 | var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url; I&#8217;ve &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://patrick.wagstrom.net/weblog/2005/03/07/tvoutjoy">
  <link href="/weblog/favicon.png" rel="icon">
  <link href="/weblog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/weblog/javascripts/modernizr-2.0.js"></script>
  <script src="/weblog/javascripts/ender.js"></script>
  <script src="/weblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/weblog/atom.xml" rel="alternate" title="My Delusional Dream" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/weblog/">My Delusional Dream</a></h1>
  
    <h2>Thoughts of a cautious technocrat</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/weblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:patrick.wagstrom.net/weblog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/weblog/">Blog</a></li>
  <li><a href="/weblog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">TV Out Joy!</h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-03-07T20:42:00-05:00" pubdate data-updated="true">Mar 7<span>th</span>, 2005</time>
        
        
         | 

<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>


        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;ve had my MGA G400-MAX dual head video card since I built my current desktop
computer back in April of 2000.  I&#8217;ve used the second head for xinerama and dual
monitor work in the past, it always worked pretty nicely.  I sold the second
monitor last year after I got my laptop.  I figured I might as well get the
second head to output on the TV.</p>

<p>Using the drivers provided by Matrox I was able to get the second head to
output to the TV, but I couldn&#8217;t get XV accelerated video.  This left me
very sad as it meant that I there wasn&#8217;t any chance of me getting
<a href="http://www.mythtv.org/">MythTV</a> running on the TV.  Well, today
I finally fixed that problem.  Yay!</p>

<p>I utilized the nice
<a href="http://davedina.apestaart.org/download/doc/Matrox-TVOUT-HOWTO-0.1.txt">G400 TVOut HowTo</a>
from <a href="http://thomas.apestaart.org/">Thomasvs</a> to get going.
Amazingly, almost everything was easily installed from apt.  The
kernel already had all of the modules compiled, so that was no
problem.  fbset was installed via apt.  I needed to go visit the
<a href="http://packages.debian.org/unstable/misc/matroxset">debian matroxset packages</a>.
On <a href="http://www.ubuntulinux.com/">Ubuntu</a> these installed without any
problem.</p>

<p>The next thing I did was to make the system load the appropriate modules
at run time.  So I added the following lines to my
<code>/etc/modules</code> file, which autoloads modules at
system boot time.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># needed for doing TVOut
</span><span class='line'>    mga
</span><span class='line'>    i2c_matroxfb
</span><span class='line'>    matroxfb_crtc2
</span><span class='line'>    matroxfb_maven</span></code></pre></td></tr></table></div></figure>


<p>The next step was to create a startup script.  I&#8217;ve pasted that below.  Save
this as <code>/etc/init.d/matroxTVOut</code>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>
</span><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'>
</span><span class='line'>. /lib/lsb/init-functions
</span><span class='line'>. /etc/default/rcS
</span><span class='line'>
</span><span class='line'><span class="nv">MATROXSET</span><span class="o">=</span>/usr/bin/matroxset
</span><span class='line'><span class="nv">FBSET</span><span class="o">=</span>/usr/sbin/fbset
</span><span class='line'><span class="nv">FBDEV</span><span class="o">=</span>/dev/fb0
</span><span class='line'><span class="nv">FBDEV2</span><span class="o">=</span>/dev/fb1
</span><span class='line'>
</span><span class='line'><span class="c"># test to ensure that the proper tools are present</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Testing for matrox set&quot;</span>
</span><span class='line'><span class="nb">test</span> -f <span class="nv">$MATROXSET</span> <span class="o">||</span> <span class="nb">exit </span>0
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Testing for fbset&quot;</span>
</span><span class='line'><span class="nb">test</span> -f <span class="nv">$FBSET</span> <span class="o">||</span> <span class="nb">exit </span>0
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Testing for fbdev&quot;</span>
</span><span class='line'><span class="nb">test</span> -c <span class="nv">$FBDEV</span> <span class="o">||</span> <span class="nb">exit </span>0
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;everything seems to be present&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">case</span> <span class="s2">&quot;$1&quot;</span> in
</span><span class='line'>        start<span class="o">)</span>
</span><span class='line'>                log_begin_msg <span class="s2">&quot;Initializing Matrox TV out...&quot;</span>
</span><span class='line'>                <span class="nv">$MATROXSET</span> -f <span class="nv">$FBDEV</span> -m 0
</span><span class='line'>                <span class="nv">$MATROXSET</span> -f <span class="nv">$FBDEV</span> -m 3
</span><span class='line'>                <span class="nv">$MATROXSET</span> -f <span class="nv">$FBDEV</span> -o 1 2
</span><span class='line'>                <span class="nv">$FBSET</span> -fb <span class="nv">$FBDEV</span> -xres 800 -yres 600
</span><span class='line'>                <span class="nv">$FBSET</span> -fb <span class="nv">$FBDEV</span> -left 54 -right 26 -lower 32 -upper 80 -hslen 40
</span><span class='line'>                log_end_msg <span class="nv">$?</span>
</span><span class='line'>                ;;
</span><span class='line'>        stop<span class="o">)</span>
</span><span class='line'>                log_begin_msg <span class="s2">&quot;Stopping Matrox TV out...&quot;</span>
</span><span class='line'>                <span class="nv">$MATROXSET</span> -f <span class="nv">$FBDEV</span> -m 0
</span><span class='line'>                <span class="nv">$MATROXSET</span> -f <span class="nv">$FBDEV2</span> -m 0
</span><span class='line'>                <span class="nv">$MATROXSET</span> -f <span class="nv">$FBDEV</span> -m 1
</span><span class='line'>                <span class="nv">$FBSET</span> -fb <span class="nv">$FBDEV</span> -left 0 -right 0 -lower 0 -upper 0
</span><span class='line'>                log_end_msg <span class="nv">$?</span>
</span><span class='line'>                ;;
</span><span class='line'>        *<span class="o">)</span>
</span><span class='line'>                log_success_msg <span class="s2">&quot;Usage: matroxTVOut {start|stop}&quot;</span>
</span><span class='line'>                <span class="nb">exit </span>1
</span><span class='line'>                ;;
</span><span class='line'><span class="k">esac</span>
</span></code></pre></td></tr></table></div></figure>


<p>And you&#8217;ll need to add this your default startup scripts using
<code>update-rc.d</code>.  We&#8217;re almost there, the final step is to setup X11 so we
can run it on the framebuffer device.  The default Ubuntu setup is
basically right, but we need to make some changes.  We need to change
the device setting.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Section "Device"
</span><span class='line'>        Identifier      "Matrox Graphics, Inc. MGA G400 AGP"
</span><span class='line'>        Driver          "mga"
</span><span class='line'>        BusID           "PCI:1:0:0"
</span><span class='line'>        Option          "hw cursor" "off"
</span><span class='line'>        Option          "UseFBDev" "on"
</span><span class='line'>EndSection</span></code></pre></td></tr></table></div></figure>


<p>And the last little touch is to setup the output resolution in X11.
This little snippet should take care of it for you.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Section "Screen"
</span><span class='line'>        Identifier      "Default Screen"
</span><span class='line'>        Device          "Matrox Graphics, Inc. MGA G400 AGP"
</span><span class='line'>        Monitor         "AccuSync 95F"
</span><span class='line'>        DefaultDepth    16
</span><span class='line'>        DefaultFbBPP    16
</span><span class='line'>        SubSection "Display"
</span><span class='line'>                Depth 16
</span><span class='line'>                Modes "800x600"
</span><span class='line'>        EndSubSection
</span><span class='line'>EndSection</span></code></pre></td></tr></table></div></figure>


<p>And voila.  We should have everything setup to make X11 run at 800x600
mode with output on both the monitor and the TV.  You&#8217;ll want to look
at Thomasvs&#8217;
<a href="http://davedina.apestaart.org/download/doc/Matrox-TVOUT-HOWTO-0.1.txt">howto</a>
for more information on what I did with fbset.</p>

  <figure class='center'>
        <img src="/weblog/media/2005/03/mythWithTV1.jpg">
        <figcaption>MythTV TV Out Goodness </figcaption>
    </figure>




  <figure class='center'>
        <img src="/weblog/media/2005/03/mythWithTV2.jpg">
        <figcaption>MythTV Showing TV Out </figcaption>
    </figure>

</div>


<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>




  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Wagstrom</span></span>

      








  


<time datetime="2005-03-07T20:42:00-05:00" pubdate data-updated="true">Mar 7<span>th</span>, 2005</time>
      

<span class="categories">
  
    <a class='category' href='/weblog/blog/categories/mythtv/'>mythtv</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://patrick.wagstrom.net/weblog/2005/03/07/tvoutjoy/" data-via="pridkett" data-counturl="http://patrick.wagstrom.net/weblog/2005/03/07/tvoutjoy/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/weblog/2005/03/07/alphacentauri/" title="Previous Post: Loki Games Under Ubuntu : Alpha Centauri">&laquo; Loki Games Under Ubuntu : Alpha Centauri</a>
      
      
        <a class="basic-alignment right" href="/weblog/2005/03/12/rssfeedsickness/" title="Next Post: My RSS Feed Is Sick">My RSS Feed Is Sick &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weblog/2012/05/10/static-bloggin/">Static Bloggin</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/28/i-am-not-a-climatologist-and-neither-are-most-of-these-people/">I am not a climatologist, and neither are most of these people</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/10/looking-for-summer-interns-in-the-software-technology-group-at-ibm-tj-watson-research-center/">Looking for Summer Interns in the Software Technology Group at IBM TJ Watson Research Center</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/a-review-of-2011-personal-development-goals/">A Review of 2011 Personal Development Goals</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/open-source-and-technology-predictions-for-2012/">Open Source and Technology Predictions for 2012</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pridkett">@pridkett</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pridkett',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/weblog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pridkett", 4, false);
    });
  </script>
  <script src="/weblog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pridkett" class="twitter-follow-button" data-show-count="false">Follow @pridkett</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102672530623465237388?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Patrick Wagstrom -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
