
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>A Rant on Transformiix - My Delusional Dream</title>
  <meta name="author" content="Patrick Wagstrom">

  
  <meta name="description" content="A Rant on Transformiix Nov 22nd, 2003 | var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url; I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://patrick.wagstrom.net/weblog/2003/11/22/transformiixrant">
  <link href="/weblog/favicon.png" rel="icon">
  <link href="/weblog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/weblog/javascripts/modernizr-2.0.js"></script>
  <script src="/weblog/javascripts/ender.js"></script>
  <script src="/weblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/weblog/atom.xml" rel="alternate" title="My Delusional Dream" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/weblog/">My Delusional Dream</a></h1>
  
    <h2>Thoughts of a cautious technocrat</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/weblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:patrick.wagstrom.net/weblog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/weblog/">Blog</a></li>
  <li><a href="/weblog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">A Rant on Transformiix</h1>
    
    
      <p class="meta">
        








  


<time datetime="2003-11-22T20:00:00-05:00" pubdate data-updated="true">Nov 22<span>nd</span>, 2003</time>
        
        
         | 

<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>


        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;ve been having a good time taking advantage of the Transformiix XSLT processing engine that is part of the newer
versions of <a href="http://www.mozilla.org/">Mozilla</a>.  However, I think I finally ran into something that it breaks
on.  Here&#8217;s what&#8217;s going on.  I&#8217;m dynamically generating some graphics and need to output an imagemap with them.  The
initial plan was to plunk the imagemap that I generate from <a href="http://www.graphviz.org/">neato or dot</a> as a chunk
of CDATA.  The problem is that transformiix ALWAYS escapes the output.  It
seems to completely ignore the <a href="http://www.zvon.org/xxl/XSLTreference/Output/xslt_text_disable-output-escaping.html">disable-output-escaping</a>
attribute.  So needless to say, this annoys me as it works fine with xsltproc.</p>

<p>My options were either have the server do the XSLT transformation or hack a way around it.  I chose the latter.  The first problem was
that the imagemaps spit out by dot and neato aren&#8217;t valid as they look like this:</p>

<pre><code>&lt;area shape="rect" href="vendor.py?id=317" title="OpenSSH" alt="OpenSSH" coords="441,436,569,495"&gt;
</code></pre>

<p>Now to fix that I need to add the &#8220;/&#8221; to the end of it.  So it was back to hacking the code on Graphviz (which I already had
to do for it to compile on <a href="http://fedora.redhat.com/">Fedora</a>).  Then I fixed that.  Now the problem was
I needed to make new nodes out of all these area tags.  The solution was to create another XML document in memory and transfer
the node over.  This is probably not the most efficient, but it seems to work:</p>

<pre><code>    cmap = graphviz.renderGraph(buildGraph(vendorInfo,vulns), format="cmap", engine="neato")
    cmap = """&lt;?xml version="1.0"?&gt;\n&lt;imagemap&gt;\n%s&lt;/imagemap&gt;""" % cmap
    imageMapDoc = libxml2.parseDoc(cmap)
    mapNode = imageMapDoc.children
    mapNode.setNs(myNS)
    imageNode.addChild(mapNode)
</code></pre>

<p>Probably not the most useful out of context but I&#8217;ll sum it briefly.  So the first line makes the call that returns all of
the area tags as a string.  The next line creates a dummy XML document while the third line parses
it.  The fourth selects the <imagemap> node.  The fifth sets the right namespace and finally the
sixth dumps it back it.  Then I can process all the nodes individually using the XSLT.  It&#8217;s sweet.  If only I could have
done it the easy way with a chunk of Cdata though.</p>
</div>


<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>




  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Wagstrom</span></span>

      








  


<time datetime="2003-11-22T20:00:00-05:00" pubdate data-updated="true">Nov 22<span>nd</span>, 2003</time>
      

<span class="categories">
  
    <a class='category' href='/weblog/blog/categories/web/'>web</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://patrick.wagstrom.net/weblog/2003/11/22/transformiixrant/" data-via="pridkett" data-counturl="http://patrick.wagstrom.net/weblog/2003/11/22/transformiixrant/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/weblog/2003/11/22/gtkjava/" title="Previous Post: Java with GTK Look and Feel">&laquo; Java with GTK Look and Feel</a>
      
      
        <a class="basic-alignment right" href="/weblog/2003/11/23/evotingoverview/" title="Next Post: A Primer on Why eVoting eSucks">A Primer on Why eVoting eSucks &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weblog/2012/05/10/static-bloggin/">Static Bloggin</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/28/i-am-not-a-climatologist-and-neither-are-most-of-these-people/">I am not a climatologist, and neither are most of these people</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/10/looking-for-summer-interns-in-the-software-technology-group-at-ibm-tj-watson-research-center/">Looking for Summer Interns in the Software Technology Group at IBM TJ Watson Research Center</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/a-review-of-2011-personal-development-goals/">A Review of 2011 Personal Development Goals</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/open-source-and-technology-predictions-for-2012/">Open Source and Technology Predictions for 2012</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pridkett">@pridkett</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pridkett',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/weblog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pridkett", 4, false);
    });
  </script>
  <script src="/weblog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pridkett" class="twitter-follow-button" data-show-count="false">Follow @pridkett</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102672530623465237388?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Patrick Wagstrom -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
