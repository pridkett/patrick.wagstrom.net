
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Command Line Updating Pages on Google Sites - My Delusional Dream</title>
  <meta name="author" content="Patrick Wagstrom">

  
  <meta name="description" content="Command Line Updating Pages on Google Sites Feb 4th, 2010 | var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://patrick.wagstrom.net/weblog/2010/02/04/command-line-updating-pages-on-google-sites">
  <link href="/weblog/favicon.png" rel="icon">
  <link href="/weblog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/weblog/javascripts/modernizr-2.0.js"></script>
  <script src="/weblog/javascripts/ender.js"></script>
  <script src="/weblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/weblog/atom.xml" rel="alternate" title="My Delusional Dream" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/weblog/">My Delusional Dream</a></h1>
  
    <h2>Thoughts of a cautious technocrat</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/weblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:patrick.wagstrom.net/weblog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/weblog/">Blog</a></li>
  <li><a href="/weblog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Command Line Updating Pages on Google Sites</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-04T21:38:28-05:00" pubdate data-updated="true">Feb 4<span>th</span>, 2010</time>
        
        
         | 

<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<script type="text/javascript" src="http://www.intensedebate.com/js/genericLinkWrapperV2.js"></script>


        
      </p>
    
  </header>


<div class="entry-content"><p>About eighteen months ago I migrated <a href="http://academic.patrick.wagstrom.net/">my academic web pages</a> away from a self hosted solution on a Linux box in my living room to <a href="http://sites.google.com/">Google Sites</a>.  Mainly this was done because I was applying for jobs and wanted to make sure that the site would be reliable.  But although I came for the reliability, I stayed for the features.</p>

<p>It&#8217;s true that Google Sites is somewhat limiting in what you can do.  You can&#8217;t do fun stuff with <a href="http://jquery.com/">jQuery</a> and highly customized CSS is verboten.  It&#8217;s not going to work for someone who needs to share a design portfolio.  However, for an academic it works really well.  Basically, I need a set of pages about <a href="http://academic.patrick.wagstrom.net/">my research</a>, <a href="http://academic.patrick.wagstrom.net/publications">copies of my papers</a> and <a href="http://academic.patrick.wagstrom.net/presentations">presentations</a>, and various forms of <a href="http://academic.patrick.wagstrom.net/resume">my résumé</a> and <a href="http://academic.patrick.wagstrom.net/cv">cv</a>.  These are all typically boring pages that can be created with some simple HTML.  Google Sites manages that and even helps them look good too.</p>

<p>At that time I also realized that I needed to be a bit more flexible in how I handled my resume and CV.  Up until this point I had a highly customized LaTeX file that generated a very pretty PDF.  The beauty was only skin deep, underneath the PDF it was ugly, difficult to maintain, and if I wanted to paste portions of the document in to an email or someone requested a word document version, I was out of luck.</p>

<p>At the time I still hadn&#8217;t gotten <a href="http://patrick.wagstrom.net/weblog/2009/11/25/shutting-down-pennave/">my head on straight regarding how XML should never be used by humans</a>, so I chose the <a href="http://xmlresume.sourceforge.net/">XML Résumé Library</a>, an Open Source package that hasn&#8217;t been updated in a couple of years.  The library consists of an XML DTD that defines elements of a resume and a set of XSLT files that translate your resume into various formats, including text, html, and FO.  I can then use the FO files to generate PDF, DOCX, and ODT files.  Simple enough. Now I have a single source document with a Makefile that compiles the file into both my résumé and cv.</p>

<p>The problem is that I provide each document in five different formats, which means that I needed to upload 10 documents every time that I changed something.  This was not ideal at all.</p>

<p>Luckily, Google is in the process of making open APIs for all of their tools and last September they finally released the <a href="http://code.google.com/apis/sites/">Google Sites API</a>.  It still isn&#8217;t 100% complete, but with the <a href="http://code.google.com/p/gdata-python-client/">2.0.7 release of the python libraries</a> it is finally to the point where the python library is suitable for updating documents.</p>

<p>I whipped up a simple little python script that uploads files from the command line to Google Sites.  It only works with documents that have previously been uploaded by hand, so in that sense, it only updates documents.  You can find <a href="http://gist.github.com/295408">site_uploader.py as a github gist</a> or it should be embedded below.</p>

<p>The script itself has only been tested on apps for domains and has a couple of mandatory options:</p>

<ul>
<li><strong>-s/&#8211;site</strong>: The name of the site to update.  This isn&#8217;t the URL, but the name in your admin panel for the site.</li>
<li><strong>-d/&#8211;domain</strong>: The domain name of your apps for domain setup.  I&#8217;m not certain what happens if you don&#8217;t include this because all of my sites are hosted through Apps for Domains.</li>
<li><strong>-u/&#8211;user</strong>: The username to use for accessing the Google Sites API.</li>
<li><strong>-p/&#8211;pass</strong>: The password for the user account. The sites API provides multiple different authentication methods.  For my own convenience I have my Makefile prompt me for a password with Zenity then invoke the script.  I&#8217;m on a laptop which means the chance of someone else seeing my password in the process list is pretty slim.</li>
<li><strong>ENTRY_ID</strong>: each document on your site has an entry_id that doesn&#8217;t change with updates.  Think of it like a UUID.</li>
<li><strong>NEW_DOCUMENT</strong>: the filename of the new document to store on Google sites.</li>
</ul>


<p>When you&#8217;re first getting started with sites_uploader you can also use the <strong>&#8211;list</strong> option to get a list of all the documents on the site and their entry_id values.  Here&#8217;s what a simple session might look like:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>patrick@wallaby$ python sites_uploader.py -s "dummy" -d "wagstrom.net" -u "patrick@wagstrom.net" -p "PASSWORD" --ssl --list
</span><span class='line'>    ["attachment.png", "attachment", "https://sites.google.com/feeds/content/wagstrom.net/dummy/9999384153430219999"]
</span><span class='line'>    ["Home", "webpage", "https://sites.google.com/feeds/content/wagstrom.net/dummy/9999953700077559999"]
</span><span class='line'>    ["files", "filecabinet", "https://sites.google.com/feeds/content/wagstrom.net/test/9999182398032899999"]
</span><span class='line'>    patrick@wallaby$ python sites_uploader.py -s "dummy" -d "wagstrom.net" -u "patrick@wagstrom.net" -p "PASSWORD" --ssl https://sites.google.com/feeds/content/wagstrom.net/dummy/9999953700077559999 home.html</span></code></pre></td></tr></table></div></figure>


<p>This examines the site &#8220;dummy&#8221; under &#8220;wagstrom.net&#8221; by first listing all the documents, of which there are three: a png file called &#8220;attachment.png&#8221;, a webpage called &#8220;home&#8221;, and a filecabinet called &#8220;files&#8221;.  We note the id of the webpage called &#8220;home&#8221; and wish to replace its content with that of home.html.  When an operation is successful it prints out nothing.</p>

<p>The beauty of using id&#8217;s is that they don&#8217;t change, so once you look them up and put them into your Makefile, you&#8217;ll never need to change them again.  The other nice thing about Google Sites is that it sanitizes your HTML, so you can feed it a complete HTML file and it is smart enough to just take the part that belongs in the body of the document.  Pretty neat stuff indeed.</p>

<p>The code for the tool should be pretty straight forward, but folks have questions feel free to email me and I&#8217;ll attempt to answer.</p>
</div>


<script>
var idcomments_acct = 'de6c2d3e38f6fdb9bf16fa9f1904f35d';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>




  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Wagstrom</span></span>

      








  


<time datetime="2010-02-04T21:38:28-05:00" pubdate data-updated="true">Feb 4<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/weblog/blog/categories/python/'>python</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://patrick.wagstrom.net/weblog/2010/02/04/command-line-updating-pages-on-google-sites/" data-via="pridkett" data-counturl="http://patrick.wagstrom.net/weblog/2010/02/04/command-line-updating-pages-on-google-sites/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/weblog/2009/12/31/open-source-predictions-for-2010/" title="Previous Post: Open Source Predictions for 2010">&laquo; Open Source Predictions for 2010</a>
      
      
        <a class="basic-alignment right" href="/weblog/2010/02/13/what-qualifies-as-an-open-source-project/" title="Next Post: What Qualifies as an Open Source Project?">What Qualifies as an Open Source Project? &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/weblog/2012/05/10/static-bloggin/">Static Bloggin</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/28/i-am-not-a-climatologist-and-neither-are-most-of-these-people/">I am not a climatologist, and neither are most of these people</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/10/looking-for-summer-interns-in-the-software-technology-group-at-ibm-tj-watson-research-center/">Looking for Summer Interns in the Software Technology Group at IBM TJ Watson Research Center</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/a-review-of-2011-personal-development-goals/">A Review of 2011 Personal Development Goals</a>
      </li>
    
      <li class="post">
        <a href="/weblog/2012/01/03/open-source-and-technology-predictions-for-2012/">Open Source and Technology Predictions for 2012</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pridkett">@pridkett</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pridkett',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/weblog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("pridkett", 4, false);
    });
  </script>
  <script src="/weblog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/pridkett" class="twitter-follow-button" data-show-count="false">Follow @pridkett</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102672530623465237388?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Patrick Wagstrom -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
